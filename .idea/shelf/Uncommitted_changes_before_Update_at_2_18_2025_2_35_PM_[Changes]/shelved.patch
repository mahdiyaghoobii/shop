Index: home/signals.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from apscheduler.schedulers.background import BackgroundScheduler\r\nfrom django.db.models.signals import post_save, pre_delete, m2m_changed\r\nfrom django.dispatch import receiver\r\nfrom django.utils import timezone\r\n\r\nfrom .models import Discount, Categories, Products\r\n\r\n\r\n@receiver(post_save, sender=Discount)\r\ndef update_products_on_discount_change(sender, instance, **kwargs):\r\n    related_categories = Categories.objects.filter(discount=instance)\r\n    for category in related_categories:\r\n        for product in Products.objects.filter(category=category):\r\n            product.save()\r\n\r\n\r\n@receiver(post_save, sender=Categories)\r\ndef update_product_prices(sender, instance, **kwargs):\r\n    for product in Products.objects.filter(category=instance):\r\n        product.save()\r\n\r\n\r\n@receiver(pre_delete, sender=Discount)\r\ndef handle_discount_deletion(sender, instance, **kwargs):\r\n    Categories.objects.filter(discount=instance).update(discount=None)\r\n\r\n\r\n@receiver(m2m_changed, sender=Products.category.through)\r\ndef update_products_on_category_change(sender, instance, action, **kwargs):\r\n    if action in (\"post_add\", \"post_remove\", \"post_clear\"):\r\n        instance.save()\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/home/signals.py b/home/signals.py
--- a/home/signals.py	(revision 6c3bdca95f0502f90f87b5410586452e7eef77b0)
+++ b/home/signals.py	(date 1739873935417)
@@ -2,8 +2,44 @@
 from django.db.models.signals import post_save, pre_delete, m2m_changed
 from django.dispatch import receiver
 from django.utils import timezone
-
 from .models import Discount, Categories, Products
+from django.db.models import F
+
+
+# ایجاد یک scheduler
+scheduler = BackgroundScheduler()
+
+
+@receiver(post_save, sender=Discount)
+def schedule_discount_expiry(sender, instance, created, **kwargs):
+    if created and instance.end_date:  # فقط برای تخفیف‌های جدید و دارای end_date
+        # حذف تسک قبلی اگر وجود داشته باشد
+        job_id = f"discount_{instance.id}"
+        if scheduler.get_job(job_id):
+            scheduler.remove_job(job_id)
+
+        # برنامه‌ریزی تسک جدید
+        scheduler.add_job(
+            deactivate_discount,
+            'date',
+            run_date=instance.end_date,
+            args=[instance.id],
+            id=job_id
+        )
+
+        # شروع scheduler اگر هنوز شروع نشده باشد
+        if not scheduler.running:
+            scheduler.start()
+
+
+def deactivate_discount(discount_id):
+    try:
+        discount = Discount.objects.get(id=discount_id)
+        if timezone.now() >= discount.end_date:
+            discount.is_active = False
+            discount.save()
+    except Discount.DoesNotExist:
+        pass
 
 
 @receiver(post_save, sender=Discount)
@@ -25,8 +61,25 @@
     Categories.objects.filter(discount=instance).update(discount=None)
 
 
+@receiver(post_save, sender=Products)
+def update_product_discounted_price(sender, instance, created, **kwargs):
+    if created: # Only run this if the product is newly created
+        update_discounted_price(instance) # Call the helper function
+
 @receiver(m2m_changed, sender=Products.category.through)
 def update_products_on_category_change(sender, instance, action, **kwargs):
     if action in ("post_add", "post_remove", "post_clear"):
-        instance.save()
+        update_discounted_price(instance) # Call the helper function
+
+def update_discounted_price(instance): # Helper function
+    valid_discounts = []
+    for category in instance.category.all().prefetch_related('discount'):
+        if category.discount and category.discount.is_valid():  # Assuming is_valid() is defined
+            valid_discounts.append(category.discount.percentage)
 
+    max_discount = max(valid_discounts) if valid_discounts else 0
+
+    if max_discount > 0:
+        Products.objects.filter(pk=instance.pk).update(discounted_price=F('price') * (100 - max_discount) // 100)
+    else:
+        Products.objects.filter(pk=instance.pk).update(discounted_price=None)
\ No newline at end of file
Index: home/serializer.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.contrib.auth import get_user_model\r\nfrom rest_framework import serializers\r\nfrom unicodedata import category\r\n\r\nfrom account.models import User\r\nfrom . import models\r\nfrom rest_framework import serializers\r\nfrom account.models import User\r\nfrom django.contrib.auth.password_validation import validate_password\r\n\r\nfrom .admin import ProductsInfoAdmin\r\n\r\n\r\nclass RegisterSerializer(serializers.ModelSerializer):\r\n    password = serializers.CharField(\r\n        write_only=True, required=True, validators=[validate_password])\r\n\r\n    class Meta:\r\n        model = User\r\n        fields = ('username', 'password')\r\n\r\n    def create(self, validated_data):\r\n        user = User.objects.create_user(\r\n            username=validated_data['username'],\r\n            password=validated_data['password']\r\n        )\r\n        return user\r\n\r\n\r\nclass ProductsInfoSerializer(serializers.ModelSerializer):\r\n    class Meta:\r\n        model = models.ProductsInfo\r\n        fields = '__all__'\r\n\r\n\r\nclass ProductCategorySerializer(serializers.ModelSerializer):\r\n    class Meta:\r\n        model = models.Categories\r\n        fields = '__all__'\r\n\r\n\r\nclass ProductTagSerializer(serializers.ModelSerializer):\r\n    class Meta:\r\n        model = models.ProductTag\r\n        fields = '__all__'\r\n\r\n\r\nclass ProductSerializer(serializers.ModelSerializer):\r\n    Info = ProductsInfoSerializer()\r\n    category = ProductCategorySerializer()\r\n    tags = ProductTagSerializer(many=True)\r\n\r\n    class Meta:\r\n        model = models.Products\r\n        fields = '__all__'\r\n\r\n\r\nclass MostSellProductSerializer(serializers.ModelSerializer):\r\n    image_url = serializers.SerializerMethodField()\r\n    Info = ProductsInfoSerializer()\r\n    class Meta:\r\n        model = models.Products\r\n        fields = ('title', 'price', 'discounted_price','Info',\r\n                 'image_url', 'sell_count')\r\n\r\n    def get_image_url(self, product):\r\n        if product.image:\r\n            return '127.0.0.1:8000' + product.image.url\r\n        return None\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/home/serializer.py b/home/serializer.py
--- a/home/serializer.py	(revision 6c3bdca95f0502f90f87b5410586452e7eef77b0)
+++ b/home/serializer.py	(date 1739876627747)
@@ -65,6 +65,16 @@
 
     def get_image_url(self, product):
         if product.image:
-            return '127.0.0.1:8000' + product.image.url
+            return 'https://127.0.0.1:8000' + product.image.url
         return None
 
+class SliderSerializer(serializers.ModelSerializer):
+    image_url = serializers.SerializerMethodField()
+    class Meta:
+        model = models.Slider
+        fields = ('title', 'description', 'is_active', 'order', 'image_url')
+
+    def get_image_url(self, slider):
+        if slider.image:
+            return 'https://127.0.0.1:8000' + slider.image.url
+        return None
\ No newline at end of file
Index: home/urls.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.urls import path, include\r\nfrom rest_framework_simplejwt.views import TokenObtainPairView, TokenRefreshView\r\nfrom home import admin\r\nfrom . import views\r\n\r\nurlpatterns = [\r\n    # path('best_product/', views.BestProductSlider.as_view(), name='best_product'),\r\n    path('list-product/', views.productlist.as_view(), name='product-list'),\r\n    path('most-sells-products/', views.product_most_sells.as_view(), name='most-sells-products'),\r\n    path('filter/', views.ProductFilter.as_view(), name='my_view'),\r\n\r\n    # path('signin/', views.signin_user, name='signin'),\r\n    # path('signup/', views.signup_user, name='signup'),\r\n]\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/home/urls.py b/home/urls.py
--- a/home/urls.py	(revision 6c3bdca95f0502f90f87b5410586452e7eef77b0)
+++ b/home/urls.py	(date 1739875644451)
@@ -8,6 +8,7 @@
     path('list-product/', views.productlist.as_view(), name='product-list'),
     path('most-sells-products/', views.product_most_sells.as_view(), name='most-sells-products'),
     path('filter/', views.ProductFilter.as_view(), name='my_view'),
+    path('slider/', views.Slides.as_view(), name='slider'),
 
     # path('signin/', views.signin_user, name='signin'),
     # path('signup/', views.signup_user, name='signup'),
Index: home/models.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import django.utils.text\r\nfrom django.contrib.auth.base_user import AbstractBaseUser\r\nfrom django.contrib.auth.models import PermissionsMixin\r\nfrom django.db import models\r\nfrom django.db.models.fields import CharField\r\nfrom django.template.defaultfilters import title\r\nfrom django.utils import timezone\r\nfrom django.utils.text import slugify\r\nfrom slugify import slugify as persian_slugify\r\nfrom datetime import datetime\r\nfrom django.db.models import JSONField\r\nfrom shop import settings\r\nfrom django.db.models.signals import post_save, m2m_changed, pre_delete\r\nfrom django.dispatch import receiver\r\n\r\n\r\n# Create your models here.\r\n\r\n\r\nclass Info(models.Model):\r\n    site_name = models.CharField(max_length=100)\r\n    support_number = models.CharField(max_length=100)\r\n\r\n    def __str__(self):\r\n        return self.site_name\r\n\r\n    def save(self, *args, **kwargs):\r\n        super().save(*args, **kwargs)\r\n\r\n\r\n# class Users(AbstractBaseUser, PermissionsMixin):\r\n#     username = models.CharField(max_length=100)\r\n#     email = models.EmailField(unique=True, blank=True, null=True)\r\n#     password = models.CharField(max_length=100)  # Note: Store hashed passwords for security\r\n#     phone = models.CharField(max_length=100, unique=True)\r\n#\r\n#     groups = models.ManyToManyField(\r\n#         'auth.Group',\r\n#         related_name='custom_user_set',  # Unique related_name\r\n#         blank=True,\r\n#         verbose_name='groups',\r\n#         help_text='The groups this user belongs to. A user will get all permissions granted to each of their groups.',\r\n#     )\r\n#     user_permissions = models.ManyToManyField(\r\n#         'auth.Permission',\r\n#         related_name='custom_user_set',  # Unique related_name\r\n#         blank=True,\r\n#         verbose_name='user permissions',\r\n#         help_text='Specific permissions for this user.',\r\n#     )\r\n#\r\n#     def __str__(self):\r\n#         return self.username\r\n\r\n# class UserInfo(models.Model):\r\n#     user = models.OneToOneField(Users, on_delete=models.CASCADE, related_name='info', default=None)\r\n#     address = models.CharField(max_length=100)\r\n#     postal_code = models.CharField(max_length=100)\r\n#     home_phone = models.CharField(max_length=100)\r\n#     payment_info = JSONField(blank=True, default=list, help_text=\"Store detailed payment information as JSON\", editable=False)\r\n\r\n# def __str__(self):\r\n#     return self.user.phone  # Use the related user's phone number\r\n#\r\n# def save(self, *args, **kwargs):\r\n#     # Ensure the payment_info is a list if it's empty\r\n#     if not self.payment_info:\r\n#         self.payment_info = []\r\n#     super().save(*args, **kwargs)\r\n\r\n\r\nclass Discount(models.Model):\r\n    title = models.CharField(max_length=100, verbose_name='عنوان', db_index=True)\r\n    percentage = models.PositiveIntegerField(verbose_name=\"درصد تخفیف\")\r\n    start_date = models.DateTimeField(null=True, blank=True, verbose_name='تاریخ شروع')\r\n    end_date = models.DateTimeField(null=True, blank=True, verbose_name='تاریخ پایان')\r\n    is_active = models.BooleanField(default=False, verbose_name='فعال / غیر فعال')\r\n\r\n    class Meta:\r\n        verbose_name = 'تخفیف'\r\n        verbose_name_plural = 'تخفیف ها'\r\n\r\n    def is_valid(self):\r\n        now = timezone.now()\r\n        start_ok = self.start_date is None or self.start_date <= now\r\n        end_ok = self.end_date is None or self.end_date >= now\r\n        return self.is_active and start_ok and end_ok\r\n\r\n    def __str__(self):\r\n        return self.title\r\n\r\n\r\nclass Categories(models.Model):\r\n    name = models.CharField(max_length=100, verbose_name='عنوان', db_index=True)\r\n    url_title = models.CharField(max_length=100, null=True, verbose_name='عنوان در url', db_index=True)\r\n    content = models.TextField(null=True, blank=True, verbose_name='توضیحات')\r\n    discount = models.ForeignKey(Discount, on_delete=models.SET_NULL, null=True, blank=True, verbose_name=\"تخفیف\")\r\n    is_active = models.BooleanField(default=False, verbose_name='فعال / غیر فعال')\r\n\r\n    class Meta:\r\n        verbose_name = 'سته بندی'\r\n        verbose_name_plural = 'دسته بندی ها'\r\n\r\n    def __str__(self):\r\n        return self.name\r\n\r\n\r\nclass ProductTag(models.Model):\r\n    title = models.CharField(max_length=100, verbose_name='عنوان تگ', db_index=True)\r\n    description = models.CharField(null=True, blank=True, verbose_name='توضیحات')\r\n\r\n    class Meta:\r\n        verbose_name = 'تگ محصول'\r\n        verbose_name_plural = 'تگ ها'  # tag ----> \"tags\"\r\n\r\n    def __str__(self):\r\n        return self.title\r\n\r\n\r\nclass ProductPublisher(models.Model):\r\n    title = models.CharField(max_length=100, verbose_name='نام انتشارات', db_index=True)\r\n    ia_active = models.BooleanField(default=False, verbose_name='فعال / غیر فعال')\r\n\r\n    class Meta:\r\n        verbose_name = 'انتشارات'\r\n        verbose_name_plural = 'انتشارات'\r\n\r\n    def __str__(self):\r\n        return self.title\r\n\r\n\r\nclass ProductsInfo(models.Model):\r\n    seller_name = models.CharField(max_length=100, default=\"کتابخانه\", blank=True, null=True, verbose_name='فروشنده')\r\n    author = models.CharField(max_length=100, default=None, verbose_name='نویسنده')\r\n    publisher = models.ForeignKey(ProductPublisher, on_delete=models.CASCADE, default=None, verbose_name='انتشارات')\r\n    print = models.CharField(max_length=100, default=None, verbose_name='نوبت چاپ')\r\n    translator = models.CharField(max_length=100, blank=True, null=True, verbose_name='مترجم')\r\n    pages = models.IntegerField(default=0, verbose_name='تعداد صفحات')\r\n    language = models.CharField(max_length=100, choices=[(\"en\", \"English\"), (\"fa\", \"Farsi\"), (\"ar\", \"Arabic\")],\r\n                                default='fa', verbose_name='زبان')\r\n\r\n    def __str__(self):\r\n        return f'{self.seller_name} - {self.author}'\r\n\r\n    class Meta:\r\n        verbose_name = 'اطلاعات محصول'\r\n        verbose_name_plural = 'اطلاعات محصولات'\r\n\r\n\r\nclass Products(models.Model):\r\n    title = models.CharField(max_length=100, verbose_name='عنوان', db_index=True)\r\n    price = models.IntegerField(default=0, help_text='تومان', verbose_name='قیمت', db_index=True)\r\n    discounted_price = models.IntegerField(null=True, blank=True, default=0, help_text='تومان',\r\n                                           verbose_name='قیمت پس از تخفیف', db_index=True)\r\n    content = models.TextField(null=True, verbose_name='توضیحات')\r\n    Info = models.OneToOneField(ProductsInfo, on_delete=models.CASCADE, blank=True, null=True,\r\n                                related_name='Product_Information', verbose_name='اطلاعات تکمیلی')\r\n    category = models.ManyToManyField(Categories, blank=True, verbose_name='دسته بندی')\r\n    quantity = models.PositiveIntegerField(default=0, verbose_name='تعداد')\r\n    slug = models.SlugField(max_length=100, unique=True, db_index=True, blank=True, null=True,\r\n                            verbose_name='عنوان در url')\r\n    # rate = models.IntegerField(default=0, editable=False, verbose_name='امتیاز')\r\n    sell_count = models.IntegerField(default=0, verbose_name='تعداد فروش')\r\n    # test = models.CharField(null=True, blank=True)\r\n    is_active = models.BooleanField(default=False, verbose_name='فعال / غیر فعال')\r\n    last_update = models.DateTimeField(auto_now=True, verbose_name='آخرین تغییرات', null=True)  # problem:\r\n    image = models.ImageField(upload_to='images/', blank=True, null=True, verbose_name='تصویر', default='default.png')\r\n    is_deleted = models.BooleanField(default=False, verbose_name='حذف شده / نشده')\r\n    tags = models.ManyToManyField(ProductTag, blank=True, verbose_name='تگ', default=None)\r\n\r\n    class Meta:\r\n        verbose_name = 'محصول'\r\n        verbose_name_plural = 'محصولات'\r\n\r\n    def __str__(self):\r\n        return self.title\r\n\r\n    def save(self, *args, **kwargs):\r\n        valid_discounts = []\r\n\r\n        for category in self.category.all().prefetch_related('discount'):\r\n            if category.discount and category.discount.is_valid():\r\n                valid_discounts.append(category.discount.percentage)\r\n\r\n        max_discount = max(valid_discounts) if valid_discounts else 0\r\n\r\n        if max_discount > 0:\r\n            self.discounted_price = self.price * (100 - max_discount) // 100\r\n        else:\r\n            self.discounted_price = None\r\n\r\n        super().save(*args, **kwargs)\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/home/models.py b/home/models.py
--- a/home/models.py	(revision 6c3bdca95f0502f90f87b5410586452e7eef77b0)
+++ b/home/models.py	(date 1739874950604)
@@ -5,6 +5,7 @@
 from django.db.models.fields import CharField
 from django.template.defaultfilters import title
 from django.utils import timezone
+from django.utils.html import format_html
 from django.utils.text import slugify
 from slugify import slugify as persian_slugify
 from datetime import datetime
@@ -68,7 +69,6 @@
 #         self.payment_info = []
 #     super().save(*args, **kwargs)
 
-
 class Discount(models.Model):
     title = models.CharField(max_length=100, verbose_name='عنوان', db_index=True)
     percentage = models.PositiveIntegerField(verbose_name="درصد تخفیف")
@@ -176,17 +176,25 @@
         return self.title
 
     def save(self, *args, **kwargs):
-        valid_discounts = []
-
-        for category in self.category.all().prefetch_related('discount'):
-            if category.discount and category.discount.is_valid():
-                valid_discounts.append(category.discount.percentage)
-
-        max_discount = max(valid_discounts) if valid_discounts else 0
-
-        if max_discount > 0:
-            self.discounted_price = self.price * (100 - max_discount) // 100
-        else:
-            self.discounted_price = None
-
         super().save(*args, **kwargs)
+
+class Slider(models.Model):
+    title = models.CharField(max_length=200, verbose_name='عنوان')
+    image = models.ImageField(upload_to='slides/', verbose_name='تصویر اسلاید')
+    description = models.TextField(verbose_name='توضیحات', blank=True)
+    is_active = models.BooleanField(default=True, verbose_name='فعال')
+    order = models.PositiveIntegerField(default=0, verbose_name='ترتیب نمایش')
+
+    class Meta:
+        verbose_name = 'اسلاید'
+        verbose_name_plural = 'اسلایدها'
+        ordering = ['order']
+
+    def __str__(self):
+        return self.title
+
+    def image_preview(self):
+        if self.image:
+            return format_html('<img src="{}" width="150" />', self.image.url)
+        return "بدون تصویر"
+    image_preview.short_description = 'پیش‌نمایش'
Index: home/views.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.core.serializers import serialize\r\nfrom django.http import JsonResponse\r\nfrom django.shortcuts import render\r\nfrom django.views import View, generic\r\nfrom rest_framework.decorators import api_view, permission_classes\r\nfrom rest_framework.permissions import AllowAny\r\nfrom rest_framework.response import Response\r\nfrom rest_framework.views import APIView\r\nfrom rest_framework import generics, mixins, viewsets, status, pagination, permissions\r\nfrom rest_framework.request import Request\r\nfrom rest_framework_simplejwt.authentication import JWTAuthentication\r\nfrom .models import Products\r\nfrom django.contrib.auth import authenticate, login, logout\r\nfrom rest_framework.authtoken.models import Token\r\nfrom .serializer import RegisterSerializer, ProductSerializer, MostSellProductSerializer\r\nfrom rest_framework_simplejwt.views import TokenObtainPairView\r\n\r\n\r\n# class CustomPagination(pagination.PageNumberPagination):\r\n#     page_size = 1  # Number of items per page\r\n#     page_size_query_param = 'page_size'\r\n#     max_page_size = 100\r\n\r\nclass productlist(APIView):\r\n    authentication_classes = []  # غیرفعال کردن JWT برای این ویو\r\n    permission_classes = [AllowAny]  # اجازه دسترسی به همه کاربران\r\n\r\n    def get(self, request: Request):\r\n        prlist = Products.objects.all()\r\n        # paginator = CustomPagination()\r\n        # paginated_prlist = paginator.paginate_queryset(prlist, request)\r\n        product_serializer = ProductSerializer(prlist, many=True)\r\n        # return paginator.get_paginated_response(product_serializer.data)\r\n        return Response(product_serializer.data, status=status.HTTP_200_OK)\r\n\r\n\r\nclass ProductFilter(APIView):\r\n    authentication_classes = []\r\n    permission_classes = [AllowAny]\r\n\r\n    def get(self, request: Request):\r\n        # Get query parameters for 'tag' and 'category'\r\n        tag_title = request.query_params.get('tag', None)\r\n        category_title = request.query_params.get('category', None)\r\n        price_min = int(request.query_params.get('min', default=0))\r\n        price_max = int(request.query_params.get('max', default=9999999999999999999999))\r\n        # Start with all products\r\n        prlist = Products.objects.all()\r\n        # Apply filters based on query parameters\r\n        if tag_title is not None:  # tag filter\r\n            prlist = prlist.filter(tags__title=tag_title)\r\n            if not prlist.exists():\r\n                return Response({\"error\": f\"No products found for tag: {tag_title}.\"}, status=status.HTTP_404_NOT_FOUND)\r\n        if category_title is not None:  # category filter\r\n            prlist = prlist.filter(category__name=category_title)\r\n            if not prlist.exists():\r\n                return Response({\"error\": f\"No products found for category: {category_title}.\"},\r\n                                status=status.HTTP_404_NOT_FOUND)\r\n        if price_min is not None and price_max is not None:  # price limits\r\n            prlist = prlist.filter(price__gte=price_min, price__lte=price_max)\r\n            if not prlist.exists():\r\n                return Response({\"error\": f\"No products found for this price range: {price_min} - {price_max}.\"},\r\n                                status=status.HTTP_404_NOT_FOUND)\r\n        product_serializer = ProductSerializer(prlist, many=True)\r\n        return Response(product_serializer.data, status=status.HTTP_200_OK)\r\n\r\n\r\nclass product_most_sells(APIView):\r\n    authentication_classes = []\r\n    permission_classes = [AllowAny]\r\n\r\n    def get(self, request: Request):\r\n        mslist = Products.objects.all().order_by('-sell_count')[:10]\r\n        product_most_sells_serilizer = MostSellProductSerializer(mslist, many=True)\r\n        return Response(product_most_sells_serilizer.data, status=status.HTTP_200_OK)\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/home/views.py b/home/views.py
--- a/home/views.py	(revision 6c3bdca95f0502f90f87b5410586452e7eef77b0)
+++ b/home/views.py	(date 1739875978463)
@@ -9,10 +9,10 @@
 from rest_framework import generics, mixins, viewsets, status, pagination, permissions
 from rest_framework.request import Request
 from rest_framework_simplejwt.authentication import JWTAuthentication
-from .models import Products
+from .models import Products, Slider
 from django.contrib.auth import authenticate, login, logout
 from rest_framework.authtoken.models import Token
-from .serializer import RegisterSerializer, ProductSerializer, MostSellProductSerializer
+from .serializer import RegisterSerializer, ProductSerializer, MostSellProductSerializer, SliderSerializer
 from rest_framework_simplejwt.views import TokenObtainPairView
 
 
@@ -73,3 +73,16 @@
         mslist = Products.objects.all().order_by('-sell_count')[:10]
         product_most_sells_serilizer = MostSellProductSerializer(mslist, many=True)
         return Response(product_most_sells_serilizer.data, status=status.HTTP_200_OK)
+
+class Slides(APIView):
+    authentication_classes = []  # غیرفعال کردن JWT برای این ویو
+    permission_classes = [AllowAny]  # اجازه دسترسی به همه کاربران
+
+    def get(self, request: Request):
+        slide_images = Slider.objects.filter(is_active = True).order_by('order')[:5]
+        # paginator = CustomPagination()
+        # paginated_prlist = paginator.paginate_queryset(prlist, request)
+        slider_serializer = SliderSerializer(slide_images, many=True)
+        # return paginator.get_paginated_response(product_serializer.data)
+        return Response(slider_serializer.data, status=status.HTTP_200_OK)
+
Index: home/migrations/0005_rename_slide_slider.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/home/migrations/0005_rename_slide_slider.py b/home/migrations/0005_rename_slide_slider.py
new file mode 100644
--- /dev/null	(date 1739875041810)
+++ b/home/migrations/0005_rename_slide_slider.py	(date 1739875041810)
@@ -0,0 +1,17 @@
+# Generated by Django 5.1.4 on 2025-02-18 10:37
+
+from django.db import migrations
+
+
+class Migration(migrations.Migration):
+
+    dependencies = [
+        ('home', '0004_slide'),
+    ]
+
+    operations = [
+        migrations.RenameModel(
+            old_name='Slide',
+            new_name='Slider',
+        ),
+    ]
Index: requirements.txt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>asgiref==3.8.1\r\ncertifi==2025.1.31\r\ncharset-normalizer==3.4.1\r\nDjango==5.1.4\r\ndjango-cors-headers==4.7.0\r\ndjango-filter==25.1\r\ndjango-render-partial==0.4\r\ndjangorestframework==3.15.2\r\ndjangorestframework_simplejwt==5.4.0\r\nFaker==36.1.1\r\nidna==3.10\r\nlxml==5.3.1\r\nMarkdown==3.7\r\npillow==11.1.0\r\npsycopg2==2.9.10\r\npsycopg2-binary==2.9.10\r\npyaes==1.6.1\r\npyasn1==0.6.1\r\nPyJWT==2.10.1\r\npyTelegramBotAPI==4.26.0\r\npython-docx==1.1.2\r\npython-slugify==8.0.3\r\nrequests==2.32.3\r\nrsa==4.9\r\nsqlparse==0.5.3\r\ntelebot==0.0.5\r\nTelethon==1.38.1\r\ntext-unidecode==1.3\r\ntyping_extensions==4.12.2\r\ntzdata==2025.1\r\nurllib3==2.3.0\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-16LE
===================================================================
diff --git a/requirements.txt b/requirements.txt
--- a/requirements.txt	(revision 6c3bdca95f0502f90f87b5410586452e7eef77b0)
+++ b/requirements.txt	(date 1739863896990)
@@ -29,3 +29,4 @@
 typing_extensions==4.12.2
 tzdata==2025.1
 urllib3==2.3.0
+APScheduler~=3.11.0
\ No newline at end of file
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"d346ba8d-3471-4fb1-81d1-362c192cc44f\" name=\"Changes\" comment=\"optimize workspace configuration and update task summaries\">\r\n      <change afterPath=\"$PROJECT_DIR$/home/signals.py\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/home/apps.py\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/home/apps.py\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/home/models.py\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/home/models.py\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/shop/settings.py\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/shop/settings.py\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"DjangoConsoleOptions\" custom-start-script=\"import sys; print('Python %s on %s' % (sys.version, sys.platform))&#10;import django; print('Django %s' % django.get_version())&#10;sys.path.extend([WORKING_DIR_AND_PYTHON_PATHS])&#10;if 'setup' in dir(django): django.setup()&#10;import django_manage_shell; django_manage_shell.run(PROJECT_ROOT)\">\r\n    <option name=\"myCustomStartScript\" value=\"import sys; print('Python %s on %s' % (sys.version, sys.platform))&#10;import django; print('Django %s' % django.get_version())&#10;sys.path.extend([WORKING_DIR_AND_PYTHON_PATHS])&#10;if 'setup' in dir(django): django.setup()&#10;import django_manage_shell; django_manage_shell.run(PROJECT_ROOT)\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"HTML File\" />\r\n        <option value=\"Python Script\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"GitHubPullRequestSearchHistory\">{\r\n  &quot;lastFilter&quot;: {\r\n    &quot;state&quot;: &quot;OPEN&quot;,\r\n    &quot;assignee&quot;: &quot;boogey7&quot;\r\n  }\r\n}</component>\r\n  <component name=\"GithubDefaultAccount\">\r\n    <option name=\"defaultAccountId\" value=\"b89fa2d7-b7f9-4e76-98e2-12a168079e12\" />\r\n  </component>\r\n  <component name=\"GithubPullRequestsUISettings\">{\r\n  &quot;selectedUrlAndAccountId&quot;: {\r\n    &quot;url&quot;: &quot;https://github.com/boogey7/shop.git&quot;,\r\n    &quot;accountId&quot;: &quot;b89fa2d7-b7f9-4e76-98e2-12a168079e12&quot;\r\n  }\r\n}</component>\r\n  <component name=\"ProjectColorInfo\">{\r\n  &quot;associatedIndex&quot;: 0\r\n}</component>\r\n  <component name=\"ProjectId\" id=\"2qLcas9gEXJQoLeSVKIhHKiJPPx\" />\r\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\">\r\n    <ConfirmationsSetting value=\"2\" id=\"Add\" />\r\n  </component>\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">{\r\n  &quot;keyToString&quot;: {\r\n    &quot;DefaultHtmlFileTemplate&quot;: &quot;HTML File&quot;,\r\n    &quot;Django Server.shop.executor&quot;: &quot;Run&quot;,\r\n    &quot;Notification.DisplayName-DoNotAsk-Database detector&quot;: &quot;Database detector&quot;,\r\n    &quot;Notification.DisplayName-DoNotAsk-GitHub Copilot&quot;: &quot;GitHub Copilot&quot;,\r\n    &quot;Notification.DoNotAsk-Database detector&quot;: &quot;true&quot;,\r\n    &quot;Notification.DoNotAsk-GitHub Copilot&quot;: &quot;true&quot;,\r\n    &quot;Python.1.executor&quot;: &quot;Run&quot;,\r\n    &quot;Python.script.executor&quot;: &quot;Run&quot;,\r\n    &quot;RunOnceActivity.OpenDjangoStructureViewOnStart&quot;: &quot;true&quot;,\r\n    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,\r\n    &quot;RunOnceActivity.git.unshallow&quot;: &quot;true&quot;,\r\n    &quot;django.template.preview.state&quot;: &quot;SHOW_EDITOR&quot;,\r\n    &quot;git-widget-placeholder&quot;: &quot;master&quot;,\r\n    &quot;last_opened_file_path&quot;: &quot;D:/py/django-pr/shop/media&quot;,\r\n    &quot;node.js.detected.package.eslint&quot;: &quot;true&quot;,\r\n    &quot;node.js.detected.package.tslint&quot;: &quot;true&quot;,\r\n    &quot;node.js.selected.package.eslint&quot;: &quot;(autodetect)&quot;,\r\n    &quot;node.js.selected.package.tslint&quot;: &quot;(autodetect)&quot;,\r\n    &quot;nodejs_package_manager_path&quot;: &quot;npm&quot;,\r\n    &quot;settings.editor.selected.configurable&quot;: &quot;com.jetbrains.python.configuration.PyActiveSdkModuleConfigurable&quot;,\r\n    &quot;settings.editor.splitter.proportion&quot;: &quot;0.2967359&quot;,\r\n    &quot;vue.rearranger.settings.migration&quot;: &quot;true&quot;\r\n  },\r\n  &quot;keyToStringList&quot;: {\r\n    &quot;DatabaseDriversLRU&quot;: [\r\n      &quot;mysql_aurora&quot;,\r\n      &quot;postgresql&quot;\r\n    ]\r\n  }\r\n}</component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"CopyFile.RECENT_KEYS\">\r\n      <recent name=\"D:\\py\\django-pr\\shop\\media\" />\r\n      <recent name=\"D:\\py\\django-pr\\shop\\contact_module\\templates\\contact_module\" />\r\n      <recent name=\"D:\\py\\django-pr\\shop\\main\\templates\\main\" />\r\n      <recent name=\"D:\\py\\django-pr\\shop\\static\" />\r\n    </key>\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"D:\\py\\django-pr\\shop\\main\" />\r\n      <recent name=\"D:\\py\\django-pr\\shop\\main\\templates\\main\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunManager\">\r\n    <configuration name=\"shop\" type=\"Python.DjangoServer\" factoryName=\"Django server\">\r\n      <module name=\"shop\" />\r\n      <option name=\"ENV_FILES\" value=\"\" />\r\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\r\n      <option name=\"PARENT_ENVS\" value=\"true\" />\r\n      <envs>\r\n        <env name=\"PYTHONUNBUFFERED\" value=\"1\" />\r\n        <env name=\"DJANGO_SETTINGS_MODULE\" value=\"shop.settings\" />\r\n      </envs>\r\n      <option name=\"SDK_HOME\" value=\"\" />\r\n      <option name=\"WORKING_DIRECTORY\" value=\"\" />\r\n      <option name=\"IS_MODULE_SDK\" value=\"false\" />\r\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\r\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\r\n      <option name=\"launchJavascriptDebuger\" value=\"false\" />\r\n      <option name=\"port\" value=\"8000\" />\r\n      <option name=\"host\" value=\"\" />\r\n      <option name=\"additionalOptions\" value=\"\" />\r\n      <option name=\"browserUrl\" value=\"\" />\r\n      <option name=\"runTestServer\" value=\"false\" />\r\n      <option name=\"runNoReload\" value=\"false\" />\r\n      <option name=\"useCustomRunCommand\" value=\"false\" />\r\n      <option name=\"customRunCommand\" value=\"\" />\r\n      <method v=\"2\" />\r\n    </configuration>\r\n  </component>\r\n  <component name=\"SharedIndexes\">\r\n    <attachedChunks>\r\n      <set>\r\n        <option value=\"bundled-js-predefined-d6986cc7102b-822845ee3bb5-JavaScript-PY-243.23654.177\" />\r\n        <option value=\"bundled-python-sdk-91d3a02ef49d-43b77aa2d136-com.jetbrains.pycharm.pro.sharedIndexes.bundled-PY-243.23654.177\" />\r\n      </set>\r\n    </attachedChunks>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"d346ba8d-3471-4fb1-81d1-362c192cc44f\" name=\"Changes\" comment=\"\" />\r\n      <created>1734445363340</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1734445363340</updated>\r\n      <workItem from=\"1734445364407\" duration=\"17691000\" />\r\n      <workItem from=\"1734605424231\" duration=\"11456000\" />\r\n      <workItem from=\"1737376978601\" duration=\"538000\" />\r\n      <workItem from=\"1737393738449\" duration=\"36448000\" />\r\n      <workItem from=\"1737977250485\" duration=\"17537000\" />\r\n      <workItem from=\"1738071274832\" duration=\"357000\" />\r\n      <workItem from=\"1738071652694\" duration=\"10359000\" />\r\n      <workItem from=\"1738155597530\" duration=\"468000\" />\r\n      <workItem from=\"1738156148669\" duration=\"178000\" />\r\n      <workItem from=\"1738157695537\" duration=\"19752000\" />\r\n      <workItem from=\"1738269666380\" duration=\"30292000\" />\r\n      <workItem from=\"1738671231465\" duration=\"3892000\" />\r\n      <workItem from=\"1738845280127\" duration=\"2458000\" />\r\n      <workItem from=\"1738922373113\" duration=\"14935000\" />\r\n      <workItem from=\"1739100954861\" duration=\"8656000\" />\r\n      <workItem from=\"1739189257496\" duration=\"13540000\" />\r\n      <workItem from=\"1739313319884\" duration=\"295000\" />\r\n      <workItem from=\"1739313655093\" duration=\"860000\" />\r\n      <workItem from=\"1739354978796\" duration=\"369000\" />\r\n      <workItem from=\"1739355369907\" duration=\"956000\" />\r\n      <workItem from=\"1739356358648\" duration=\"584000\" />\r\n      <workItem from=\"1739358568389\" duration=\"546000\" />\r\n      <workItem from=\"1739359125187\" duration=\"431000\" />\r\n      <workItem from=\"1739359566096\" duration=\"8628000\" />\r\n      <workItem from=\"1739478426728\" duration=\"608000\" />\r\n      <workItem from=\"1739479479362\" duration=\"5600000\" />\r\n      <workItem from=\"1739623406500\" duration=\"5131000\" />\r\n      <workItem from=\"1739628851060\" duration=\"844000\" />\r\n      <workItem from=\"1739700174879\" duration=\"20762000\" />\r\n      <workItem from=\"1739784970661\" duration=\"2444000\" />\r\n      <workItem from=\"1739787447884\" duration=\"12139000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"1\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1734618444881</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1734618444881</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"add website-info table\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1734620959140</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1734620959140</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"add user-table\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1734620986909</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1734620986909</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"add user-table , userinfo and WebsiteInfo-table to models.py\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1734621223812</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1734621223812</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00005\" summary=\"models.py optimized&#10;admin.py completed\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1734622454908</created>\r\n      <option name=\"number\" value=\"00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1734622454908</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00006\" summary=\"models.py optimized&#10;admin.py completed\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1738163717893</created>\r\n      <option name=\"number\" value=\"00006\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1738163717893</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00007\" summary=\"models.py optimized&#10;admin.py completed\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1738164615531</created>\r\n      <option name=\"number\" value=\"00007\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00007\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1738164615531</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00008\" summary=\"models.py optimized&#10;admin.py completed&#10;publisher set as a foreignkey model of Product Info in models.py\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1738164742946</created>\r\n      <option name=\"number\" value=\"00008\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00008\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1738164742946</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00009\" summary=\"models.py optimized&#10;admin.py completed&#10;publisher set as a foreignkey model of Product Info in models.py\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739313714751</created>\r\n      <option name=\"number\" value=\"00009\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00009\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739313714752</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00010\" summary=\"models.py optimized&#10;admin.py completed&#10;publisher set as a foreignkey model of Product Info in models.py\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739314538466</created>\r\n      <option name=\"number\" value=\"00010\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00010\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739314538466</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00011\" summary=\"{&#10;    &quot;error&quot;: {&#10;        &quot;message&quot;: &quot;Incorrect API key provided: sk-proj-********************************************************************************************************************************************************MowA. You can find your API key at https://platform.openai.com/account/api-keys.&quot;,&#10;        &quot;type&quot;: &quot;invalid_request_error&quot;,&#10;        &quot;param&quot;: null,&#10;        &quot;code&quot;: &quot;invalid_api_key&quot;&#10;    }&#10;}\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739356058167</created>\r\n      <option name=\"number\" value=\"00011\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00011\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739356058167</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00012\" summary=\"add GitToolBox project and blame settings\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739356379197</created>\r\n      <option name=\"number\" value=\"00012\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00012\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739356379197</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00013\" summary=\"add GitToolBox project and blame settings\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739359613344</created>\r\n      <option name=\"number\" value=\"00013\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00013\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739359613344</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00014\" summary=\"add GitToolBox project and blame settings\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739479593557</created>\r\n      <option name=\"number\" value=\"00014\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00014\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739479593557</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00015\" summary=\"- Create a new app for user authentication&#10;- Implement user login (by JWT) functionality&#10;- Optimize existing code for better performance\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739480031208</created>\r\n      <option name=\"number\" value=\"00015\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00015\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739480031208</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00016\" summary=\"models.py optimized&#10;admin.py completed&#10;publisher set as a foreignkey model of Product Info in models.py\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739480194435</created>\r\n      <option name=\"number\" value=\"00016\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00016\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739480194435</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00017\" summary=\"update requirements and workspace configuration for new user authentication app\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739480292666</created>\r\n      <option name=\"number\" value=\"00017\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00017\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739480292666</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00018\" summary=\"add MostSellProductSerializer and update product_most_sells view\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739627585436</created>\r\n      <option name=\"number\" value=\"00018\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00018\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739627585436</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00019\" summary=\"create random products\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739628552490</created>\r\n      <option name=\"number\" value=\"00019\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00019\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739628552490</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00020\" summary=\"create random products\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739628563455</created>\r\n      <option name=\"number\" value=\"00020\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00020\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739628563455</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00021\" summary=\"enable CORS for all origins\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739628585206</created>\r\n      <option name=\"number\" value=\"00021\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00021\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739628585206</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00022\" summary=\"add user signout functionality and update authentication permissions\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739709158974</created>\r\n      <option name=\"number\" value=\"00022\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00022\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739709158974</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00023\" summary=\"update dependencies\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739712297630</created>\r\n      <option name=\"number\" value=\"00023\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00023\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739712297630</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00024\" summary=\"add Discount\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739741437285</created>\r\n      <option name=\"number\" value=\"00024\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00024\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739741437285</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00025\" summary=\"add Discount model and update product pricing logic based on category discounts\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739741454874</created>\r\n      <option name=\"number\" value=\"00025\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00025\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739741454874</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00026\" summary=\"add Discount model and update product and category fields for discount management\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739741482116</created>\r\n      <option name=\"number\" value=\"00026\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00026\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739741482116</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00027\" summary=\"update workspace configuration and add tasks for dependency updates\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739741496850</created>\r\n      <option name=\"number\" value=\"00027\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00027\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739741496850</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00028\" summary=\"update workspace configuration and add tasks for dependency updates\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739741548803</created>\r\n      <option name=\"number\" value=\"00028\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00028\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739741548803</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00029\" summary=\"update workspace configuration and add tasks for dependency updates\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739741858628</created>\r\n      <option name=\"number\" value=\"00029\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00029\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739741858628</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00030\" summary=\"optimized\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739741889586</created>\r\n      <option name=\"number\" value=\"00030\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00030\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739741889586</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00031\" summary=\"optimize workspace configuration and update task summaries\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739741919746</created>\r\n      <option name=\"number\" value=\"00031\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00031\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739741919746</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00032\" summary=\"optimized\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739785810849</created>\r\n      <option name=\"number\" value=\"00032\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00032\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739785810849</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00033\" summary=\"writer renamed to author\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739794580454</created>\r\n      <option name=\"number\" value=\"00033\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00033\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739794580454</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00034\" summary=\"rename writer field to author in productsinfo model\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739794599349</created>\r\n      <option name=\"number\" value=\"00034\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00034\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739794599349</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00035\" summary=\"rename writer field to author in ProductsInfo model\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739794610371</created>\r\n      <option name=\"number\" value=\"00035\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00035\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739794610371</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00036\" summary=\"add image_url field and update fields in MostSellProductSerializer\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739794626228</created>\r\n      <option name=\"number\" value=\"00036\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00036\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739794626228</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00037\" summary=\"optimize workspace configuration and update task summaries\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1739794675047</created>\r\n      <option name=\"number\" value=\"00037\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00037\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1739794675047</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"38\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State>\r\n              <option name=\"CUSTOM_BOOLEAN_PROPERTIES\">\r\n                <map>\r\n                  <entry key=\"Show.Git.Branches\" value=\"true\" />\r\n                </map>\r\n              </option>\r\n            </State>\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"add website-info table\" />\r\n    <MESSAGE value=\"add user-table\" />\r\n    <MESSAGE value=\"add user-table , userinfo and WebsiteInfo-table to models.py\" />\r\n    <MESSAGE value=\"models.py optimized&#10;admin.py completed\" />\r\n    <MESSAGE value=\"add requirements\" />\r\n    <MESSAGE value=\"{&#10;    &quot;error&quot;: {&#10;        &quot;message&quot;: &quot;Incorrect API key provided: sk-proj-********************************************************************************************************************************************************MowA. You can find your API key at https://platform.openai.com/account/api-keys.&quot;,&#10;        &quot;type&quot;: &quot;invalid_request_error&quot;,&#10;        &quot;param&quot;: null,&#10;        &quot;code&quot;: &quot;invalid_api_key&quot;&#10;    }&#10;}\" />\r\n    <MESSAGE value=\"add GitToolBox project and blame settings\" />\r\n    <MESSAGE value=\"- Create a new app for user authentication&#10;- Implement user login (by JWT) functionality&#10;- Optimize existing code for better performance\" />\r\n    <MESSAGE value=\"models.py optimized&#10;admin.py completed&#10;publisher set as a foreignkey model of Product Info in models.py\" />\r\n    <MESSAGE value=\"update requirements and workspace configuration for new user authentication app\" />\r\n    <MESSAGE value=\"add MostSellProductSerializer and update product_most_sells view\" />\r\n    <MESSAGE value=\"create random products\" />\r\n    <MESSAGE value=\"enable CORS for all origins\" />\r\n    <MESSAGE value=\"add user signout functionality and update authentication permissions\" />\r\n    <MESSAGE value=\"update dependencies\" />\r\n    <MESSAGE value=\"add Discount\" />\r\n    <MESSAGE value=\"add Discount model and update product pricing logic based on category discounts\" />\r\n    <MESSAGE value=\"add Discount model and update product and category fields for discount management\" />\r\n    <MESSAGE value=\"update workspace configuration and add tasks for dependency updates\" />\r\n    <MESSAGE value=\"optimized\" />\r\n    <MESSAGE value=\"writer renamed to author\" />\r\n    <MESSAGE value=\"rename writer field to author in productsinfo model\" />\r\n    <MESSAGE value=\"rename writer field to author in ProductsInfo model\" />\r\n    <MESSAGE value=\"add image_url field and update fields in MostSellProductSerializer\" />\r\n    <MESSAGE value=\"optimize workspace configuration and update task summaries\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"optimize workspace configuration and update task summaries\" />\r\n  </component>\r\n  <component name=\"com.intellij.coverage.CoverageDataManagerImpl\">\r\n    <SUITE FILE_PATH=\"coverage/shop$1.coverage\" NAME=\"1 Coverage Results\" MODIFIED=\"1738513293719\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$USER_HOME$/Desktop\" />\r\n    <SUITE FILE_PATH=\"coverage/shop$script.coverage\" NAME=\"script Coverage Results\" MODIFIED=\"1738676259895\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$USER_HOME$/Desktop\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 6c3bdca95f0502f90f87b5410586452e7eef77b0)
+++ b/.idea/workspace.xml	(date 1739876628135)
@@ -4,12 +4,17 @@
     <option name="autoReloadType" value="SELECTIVE" />
   </component>
   <component name="ChangeListManager">
-    <list default="true" id="d346ba8d-3471-4fb1-81d1-362c192cc44f" name="Changes" comment="optimize workspace configuration and update task summaries">
-      <change afterPath="$PROJECT_DIR$/home/signals.py" afterDir="false" />
+    <list default="true" id="d346ba8d-3471-4fb1-81d1-362c192cc44f" name="Changes" comment="feat: add signal handlers for Discount and Categories models to update related Products">
+      <change afterPath="$PROJECT_DIR$/home/migrations/0004_slide.py" afterDir="false" />
+      <change afterPath="$PROJECT_DIR$/home/migrations/0005_rename_slide_slider.py" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/home/apps.py" beforeDir="false" afterPath="$PROJECT_DIR$/home/apps.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/home/admin.py" beforeDir="false" afterPath="$PROJECT_DIR$/home/admin.py" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/home/models.py" beforeDir="false" afterPath="$PROJECT_DIR$/home/models.py" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/shop/settings.py" beforeDir="false" afterPath="$PROJECT_DIR$/shop/settings.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/home/serializer.py" beforeDir="false" afterPath="$PROJECT_DIR$/home/serializer.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/home/signals.py" beforeDir="false" afterPath="$PROJECT_DIR$/home/signals.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/home/urls.py" beforeDir="false" afterPath="$PROJECT_DIR$/home/urls.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/home/views.py" beforeDir="false" afterPath="$PROJECT_DIR$/home/views.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/requirements.txt" beforeDir="false" afterPath="$PROJECT_DIR$/requirements.txt" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -173,7 +178,7 @@
       <workItem from="1739628851060" duration="844000" />
       <workItem from="1739700174879" duration="20762000" />
       <workItem from="1739784970661" duration="2444000" />
-      <workItem from="1739787447884" duration="12139000" />
+      <workItem from="1739787447884" duration="23844000" />
     </task>
     <task id="LOCAL-00001" summary="1">
       <option name="closed" value="true" />
@@ -471,7 +476,39 @@
       <option name="project" value="LOCAL" />
       <updated>1739794675047</updated>
     </task>
-    <option name="localTasksCounter" value="38" />
+    <task id="LOCAL-00038" summary="add signals import in HomeConfig ready method">
+      <option name="closed" value="true" />
+      <created>1739802712585</created>
+      <option name="number" value="00038" />
+      <option name="presentableId" value="LOCAL-00038" />
+      <option name="project" value="LOCAL" />
+      <updated>1739802712585</updated>
+    </task>
+    <task id="LOCAL-00039" summary="refactor: remove unused signal receivers and update field references">
+      <option name="closed" value="true" />
+      <created>1739802735336</created>
+      <option name="number" value="00039" />
+      <option name="presentableId" value="LOCAL-00039" />
+      <option name="project" value="LOCAL" />
+      <updated>1739802735336</updated>
+    </task>
+    <task id="LOCAL-00040" summary="refactor: remove unused signal receivers and update field references">
+      <option name="closed" value="true" />
+      <created>1739802746666</created>
+      <option name="number" value="00040" />
+      <option name="presentableId" value="LOCAL-00040" />
+      <option name="project" value="LOCAL" />
+      <updated>1739802746666</updated>
+    </task>
+    <task id="LOCAL-00041" summary="feat: add signal handlers for Discount and Categories models to update related Products">
+      <option name="closed" value="true" />
+      <created>1739802768283</created>
+      <option name="number" value="00041" />
+      <option name="presentableId" value="LOCAL-00041" />
+      <option name="project" value="LOCAL" />
+      <updated>1739802768283</updated>
+    </task>
+    <option name="localTasksCounter" value="42" />
     <servers />
   </component>
   <component name="TypeScriptGeneratedFilesManager">
@@ -495,9 +532,6 @@
     </option>
   </component>
   <component name="VcsManagerConfiguration">
-    <MESSAGE value="add website-info table" />
-    <MESSAGE value="add user-table" />
-    <MESSAGE value="add user-table , userinfo and WebsiteInfo-table to models.py" />
     <MESSAGE value="models.py optimized&#10;admin.py completed" />
     <MESSAGE value="add requirements" />
     <MESSAGE value="{&#10;    &quot;error&quot;: {&#10;        &quot;message&quot;: &quot;Incorrect API key provided: sk-proj-********************************************************************************************************************************************************MowA. You can find your API key at https://platform.openai.com/account/api-keys.&quot;,&#10;        &quot;type&quot;: &quot;invalid_request_error&quot;,&#10;        &quot;param&quot;: null,&#10;        &quot;code&quot;: &quot;invalid_api_key&quot;&#10;    }&#10;}" />
@@ -520,7 +554,10 @@
     <MESSAGE value="rename writer field to author in ProductsInfo model" />
     <MESSAGE value="add image_url field and update fields in MostSellProductSerializer" />
     <MESSAGE value="optimize workspace configuration and update task summaries" />
-    <option name="LAST_COMMIT_MESSAGE" value="optimize workspace configuration and update task summaries" />
+    <MESSAGE value="add signals import in HomeConfig ready method" />
+    <MESSAGE value="refactor: remove unused signal receivers and update field references" />
+    <MESSAGE value="feat: add signal handlers for Discount and Categories models to update related Products" />
+    <option name="LAST_COMMIT_MESSAGE" value="feat: add signal handlers for Discount and Categories models to update related Products" />
   </component>
   <component name="com.intellij.coverage.CoverageDataManagerImpl">
     <SUITE FILE_PATH="coverage/shop$1.coverage" NAME="1 Coverage Results" MODIFIED="1738513293719" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$USER_HOME$/Desktop" />
Index: home/migrations/0004_slide.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/home/migrations/0004_slide.py b/home/migrations/0004_slide.py
new file mode 100644
--- /dev/null	(date 1739874733608)
+++ b/home/migrations/0004_slide.py	(date 1739874733608)
@@ -0,0 +1,29 @@
+# Generated by Django 5.1.4 on 2025-02-18 10:32
+
+from django.db import migrations, models
+
+
+class Migration(migrations.Migration):
+
+    dependencies = [
+        ('home', '0003_rename_writer_productsinfo_author'),
+    ]
+
+    operations = [
+        migrations.CreateModel(
+            name='Slide',
+            fields=[
+                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('title', models.CharField(max_length=200, verbose_name='عنوان')),
+                ('image', models.ImageField(upload_to='slides/', verbose_name='تصویر اسلاید')),
+                ('description', models.TextField(blank=True, verbose_name='توضیحات')),
+                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
+                ('order', models.PositiveIntegerField(default=0, verbose_name='ترتیب نمایش')),
+            ],
+            options={
+                'verbose_name': 'اسلاید',
+                'verbose_name_plural': 'اسلایدها',
+                'ordering': ['order'],
+            },
+        ),
+    ]
